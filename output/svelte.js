import{SvelteComponent as H,init as Q,safe_not_equal as Z,noop as A,detach as S,run_all as ot,set_input_value as B,insert as E,append as s,listen as $,element as d,space as p,attr as U,prevent_default as X,is_function as Y,set_data as I,text as k,ensure_array_like as R,update_keyed_each as it,destroy_block as st,destroy_component as z,transition_out as q,transition_in as T,group_outros as lt,check_outros as at,mount_component as G,create_component as W}from"svelte/internal";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function e(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=e(n);fetch(n.href,i)}})();const ut="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ut);class ct{constructor(t){this.data=t}getId(){return this.data.id}getFirstName(){return this.data.first_name}getLastName(){return this.data.last_name}getEmail(){return this.data.email}getCreatedDate(){return new Date(this.data.date_created)}getLastAccessedDate(){return new Date(this.data.date_last_accessed)}}class dt{constructor(t){this.data=t}getId(){return this.data.id}getName(){return this.data.name}getPrice(){return this.data.price}getQuantity(){return this.data.quantity}}class ft{constructor(t){this.data=t,this.products=[],this.data.products.forEach(e=>{this.products.push(new dt(e))})}getId(){return this.data.id}getStatus(){return this.data.status}getTotalValue(){return this.data.total}getCurrency(){return this.data.currency}getProducts(){return this.products}}const gt={id:"yudwuujwd",first_name:"Bob",last_name:"Doe",email:"bob.doe@noaddress.com",date_created:"December 25, 2024 13:03:00Z",date_last_accessed:"April 26, 2025 09:00:00Z"},ht={id:"ijdkwplasd",first_name:"John",last_name:"Doe",email:"john.doe@noaddress.com",date_created:"December 17, 2024 03:24:00Z",date_last_accessed:"April 26, 2025 07:00:00Z"},pt={id:"trpykados",name:"IPhone 16 Pro",price:1200,quantity:1},_t={id:"uiuieroas",name:"HeadPhones Apple Smart",price:110,quantity:1},mt={id:"iuijwfwe",name:"Smart Insurance",price:50,quantity:1},wt={id:"odasdqwrq",status:"shipping",total:1360,currency:"EUR",products:[pt,_t,mt]};class yt{constructor(){this.currentUser=null}async authenticate(t,e){const r=t==="bob"?gt:t==="john"?ht:null;return this.currentUser=r?new ct(r):null,this.currentUser}getCurrentUser(){return this.currentUser}async logout(){this.currentUser=null}async getOrders(){if(this.currentUser===null)throw new Error("The user is not authenticated for this operation");return[new ft(wt)]}}class Lt{constructor(){this.ui=null,this.api=new yt,this.onLogin=async(t,e)=>{await this.api.authenticate(t,e)?this.getUI().showAccount():this.getUI().showLogin()},this.onLogout=async()=>{await this.api.logout(),this.getUI().showLogin()}}connectUI(t){this.ui=t,this.ui.showLogin()}getUIProps(){const{api:t,onLogin:e,onLogout:r}=this;return{api:t,onLogin:e,onLogout:r}}getUI(){if(this.ui===null)throw new Error("UI is not connected");return this.ui}}function x(o){return o.getFirstName()+" "+o.getLastName()}function J(o){return o.toLocaleDateString()}function K(o,t){return o.toLocaleString(void 0,{style:"currency",currency:t,maximumFractionDigits:2})}function bt(o){let t,e,r,n,i,a,g,u,f,l;return{c(){t=d("div"),e=d("h1"),e.textContent="Login",r=p(),n=d("input"),i=p(),a=d("input"),g=p(),u=d("button"),u.textContent="Login",U(n,"type","text"),U(n,"placeholder","Email"),U(a,"type","password"),U(a,"placeholder","Password")},m(c,h){E(c,t,h),s(t,e),s(t,r),s(t,n),B(n,o[0]),s(t,i),s(t,a),B(a,o[1]),s(t,g),s(t,u),f||(l=[$(n,"input",o[4]),$(a,"input",o[5]),$(u,"click",o[2])],f=!0)},p(c,[h]){h&1&&n.value!==c[0]&&B(n,c[0]),h&2&&a.value!==c[1]&&B(a,c[1])},i:A,o:A,d(c){c&&S(t),f=!1,ot(l)}}}function vt(o,t,e){let{onLogin:r}=t,n="",i="";const a=()=>{r(n.trim(),i.trim())};function g(){n=this.value,e(0,n)}function u(){i=this.value,e(1,i)}return o.$$set=f=>{"onLogin"in f&&e(3,r=f.onLogin)},[n,i,a,r,g,u]}class It extends H{constructor(t){super(),Q(this,t,vt,bt,Z,{onLogin:3})}}function kt(o){let t,e,r,n,i,a,g,u;return{c(){t=d("div"),e=d("a"),e.textContent="Logout",r=p(),n=d("a"),n.textContent="Account",i=p(),a=d("a"),a.textContent="Orders",U(e,"href","#"),U(n,"href","#"),U(a,"href","#")},m(f,l){E(f,t,l),s(t,e),s(t,r),s(t,n),s(t,i),s(t,a),g||(u=[$(e,"click",X(function(){Y(o[0])&&o[0].apply(this,arguments)})),$(n,"click",X(function(){Y(o[1])&&o[1].apply(this,arguments)})),$(a,"click",X(function(){Y(o[2])&&o[2].apply(this,arguments)}))],g=!0)},p(f,[l]){o=f},i:A,o:A,d(f){f&&S(t),g=!1,ot(u)}}}function Pt(o,t,e){let{onLogout:r}=t,{onAccount:n}=t,{onOrders:i}=t;return o.$$set=a=>{"onLogout"in a&&e(0,r=a.onLogout),"onAccount"in a&&e(1,n=a.onAccount),"onOrders"in a&&e(2,i=a.onOrders)},[r,n,i]}class Ct extends H{constructor(t){super(),Q(this,t,Pt,kt,Z,{onLogout:0,onAccount:1,onOrders:2})}}function Ut(o){let t,e,r,n,i,a,g=x(o[0])+"",u,f,l,c,h,b=o[0].getEmail()+"",P,v,m,N,F,C=J(o[0].getCreatedDate())+"",L,M,O,D,j,_=J(o[0].getLastAccessedDate())+"",w;return{c(){t=d("div"),e=d("h1"),e.textContent="Account Information",r=p(),n=d("p"),i=d("strong"),i.textContent="Name:",a=p(),u=k(g),f=p(),l=d("p"),c=d("strong"),c.textContent="Email:",h=p(),P=k(b),v=p(),m=d("p"),N=d("strong"),N.textContent="Account created:",F=p(),L=k(C),M=p(),O=d("p"),D=d("strong"),D.textContent="Last accessed:",j=p(),w=k(_)},m(y,V){E(y,t,V),s(t,e),s(t,r),s(t,n),s(n,i),s(n,a),s(n,u),s(t,f),s(t,l),s(l,c),s(l,h),s(l,P),s(t,v),s(t,m),s(m,N),s(m,F),s(m,L),s(t,M),s(t,O),s(O,D),s(O,j),s(O,w)},p(y,[V]){V&1&&g!==(g=x(y[0])+"")&&I(u,g),V&1&&b!==(b=y[0].getEmail()+"")&&I(P,b),V&1&&C!==(C=J(y[0].getCreatedDate())+"")&&I(L,C),V&1&&_!==(_=J(y[0].getLastAccessedDate())+"")&&I(w,_)},i:A,o:A,d(y){y&&S(t)}}}function At(o,t,e){let{user:r}=t;return o.$$set=n=>{"user"in n&&e(0,r=n.user)},[r]}class Ot extends H{constructor(t){super(),Q(this,t,At,Ut,Z,{user:0})}}function tt(o,t,e){const r=o.slice();return r[1]=t[e],r}function et(o,t,e){const r=o.slice();return r[4]=t[e],r}function nt(o,t){let e,r,n=t[4].getName()+"",i,a,g,u=t[4].getQuantity()+"",f,l,c,h=K(t[4].getPrice(),t[1].getCurrency())+"",b,P;return{key:o,first:null,c(){e=d("tr"),r=d("td"),i=k(n),a=p(),g=d("td"),f=k(u),l=p(),c=d("td"),b=k(h),P=p(),this.first=e},m(v,m){E(v,e,m),s(e,r),s(r,i),s(e,a),s(e,g),s(g,f),s(e,l),s(e,c),s(c,b),s(e,P)},p(v,m){t=v,m&1&&n!==(n=t[4].getName()+"")&&I(i,n),m&1&&u!==(u=t[4].getQuantity()+"")&&I(f,u),m&1&&h!==(h=K(t[4].getPrice(),t[1].getCurrency())+"")&&I(b,h)},d(v){v&&S(e)}}}function rt(o,t){let e,r,n=t[1].getId()+"",i,a,g,u=t[1].getStatus()+"",f,l,c,h=K(t[1].getTotalValue(),t[1].getCurrency())+"",b,P,v,m,N,F,C,L=[],M=new Map,O,D=R(t[1].getProducts());const j=_=>_[4].getId();for(let _=0;_<D.length;_+=1){let w=et(t,D,_),y=j(w);M.set(y,L[_]=nt(y,w))}return{key:o,first:null,c(){e=d("tr"),r=d("td"),i=k(n),a=p(),g=d("td"),f=k(u),l=p(),c=d("td"),b=k(h),P=p(),v=d("td"),m=d("table"),N=d("thead"),N.innerHTML="<tr><th>Product Name</th> <th>Quantity</th> <th>Price</th></tr>",F=p(),C=d("tbody");for(let _=0;_<L.length;_+=1)L[_].c();O=p(),U(m,"border","1"),this.first=e},m(_,w){E(_,e,w),s(e,r),s(r,i),s(e,a),s(e,g),s(g,f),s(e,l),s(e,c),s(c,b),s(e,P),s(e,v),s(v,m),s(m,N),s(m,F),s(m,C);for(let y=0;y<L.length;y+=1)L[y]&&L[y].m(C,null);s(e,O)},p(_,w){t=_,w&1&&n!==(n=t[1].getId()+"")&&I(i,n),w&1&&u!==(u=t[1].getStatus()+"")&&I(f,u),w&1&&h!==(h=K(t[1].getTotalValue(),t[1].getCurrency())+"")&&I(b,h),w&1&&(D=R(t[1].getProducts()),L=it(L,w,j,1,t,D,M,C,st,nt,null,et))},d(_){_&&S(e);for(let w=0;w<L.length;w+=1)L[w].d()}}}function Dt(o){let t,e,r,n,i,a=[],g=new Map,u=R(o[0]);const f=l=>l[1].getId();for(let l=0;l<u.length;l+=1){let c=tt(o,u,l),h=f(c);g.set(h,a[l]=rt(h,c))}return{c(){t=d("div"),e=d("table"),r=d("thead"),r.innerHTML="<tr><th>Order ID</th> <th>Status</th> <th>Total Value</th> <th>Products</th></tr>",n=p(),i=d("tbody");for(let l=0;l<a.length;l+=1)a[l].c();U(e,"border","1")},m(l,c){E(l,t,c),s(t,e),s(e,r),s(e,n),s(e,i);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(i,null)},p(l,[c]){c&1&&(u=R(l[0]),a=it(a,c,f,1,l,u,g,i,st,rt,null,tt))},i:A,o:A,d(l){l&&S(t);for(let c=0;c<a.length;c+=1)a[c].d()}}}function Nt(o,t,e){let{orders:r}=t;return o.$$set=n=>{"orders"in n&&e(0,r=n.orders)},[r]}class St extends H{constructor(t){super(),Q(this,t,Nt,Dt,Z,{orders:0})}}function Et(o){let t,e;return t=new St({props:{orders:o[2]}}),{c(){W(t.$$.fragment)},m(r,n){G(t,r,n),e=!0},p(r,n){const i={};n&4&&(i.orders=r[2]),t.$set(i)},i(r){e||(T(t.$$.fragment,r),e=!0)},o(r){q(t.$$.fragment,r),e=!1},d(r){z(t,r)}}}function Vt(o){let t,e;return t=new Ot({props:{user:o[1]}}),{c(){W(t.$$.fragment)},m(r,n){G(t,r,n),e=!0},p(r,n){const i={};n&2&&(i.user=r[1]),t.$set(i)},i(r){e||(T(t.$$.fragment,r),e=!0)},o(r){q(t.$$.fragment,r),e=!1},d(r){z(t,r)}}}function $t(o){let t,e;return t=new It({props:{onLogin:o[3].onLogin}}),{c(){W(t.$$.fragment)},m(r,n){G(t,r,n),e=!0},p:A,i(r){e||(T(t.$$.fragment,r),e=!0)},o(r){q(t.$$.fragment,r),e=!1},d(r){z(t,r)}}}function qt(o){let t,e,r,n,i,a;e=new Ct({props:{onLogout:o[3].onLogout,onAccount:o[4],onOrders:o[5]}});const g=[$t,Vt,Et],u=[];function f(l,c){return l[0]==="login"?0:l[0]==="account"&&l[1]?1:l[0]==="orders"?2:-1}return~(n=f(o))&&(i=u[n]=g[n](o)),{c(){t=d("div"),W(e.$$.fragment),r=p(),i&&i.c()},m(l,c){E(l,t,c),G(e,t,null),s(t,r),~n&&u[n].m(t,null),a=!0},p(l,[c]){let h=n;n=f(l),n===h?~n&&u[n].p(l,c):(i&&(lt(),q(u[h],1,1,()=>{u[h]=null}),at()),~n?(i=u[n],i?i.p(l,c):(i=u[n]=g[n](l),i.c()),T(i,1),i.m(t,null)):i=null)},i(l){a||(T(e.$$.fragment,l),T(i),a=!0)},o(l){q(e.$$.fragment,l),q(i),a=!1},d(l){l&&S(t),z(e),~n&&u[n].d()}}}function Tt(o,t,e){const r=new Lt;let n="login",i=null,a=[];const g=r.getUIProps();r.connectUI({showAccount:u,showLogin:f,showOrders:l});async function u(){e(1,i=g.api.getCurrentUser()),i?e(0,n="account"):await f()}async function f(){e(0,n="login")}async function l(){if(!g.api.getCurrentUser())return await f();e(2,a=await g.api.getOrders()),e(0,n="orders")}return[n,i,a,g,u,l]}class Ft extends H{constructor(t){super(),Q(this,t,Tt,qt,Z,{})}}new Ft({target:document.body});
