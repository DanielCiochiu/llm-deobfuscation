import{delegateEvents as V,getNextElement as f,template as b,effect as A,setProperty as O,runHydrationEvents as q,getNextMarker as $,insert as a,createComponent as L,memo as D,render as H}from"solid-js/web";import{createSignal as C}from"solid-js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const e of n)if(e.type==="childList")for(const l of e.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function o(n){const e={};return n.integrity&&(e.integrity=n.integrity),n.referrerPolicy&&(e.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?e.credentials="include":n.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function i(n){if(n.ep)return;n.ep=!0;const e=o(n);fetch(n.href,e)}})();class M{constructor(t){this.data=t}getId(){return this.data.id}getFirstName(){return this.data.first_name}getLastName(){return this.data.last_name}getEmail(){return this.data.email}getCreatedDate(){return new Date(this.data.date_created)}getLastAccessedDate(){return new Date(this.data.date_last_accessed)}}class Q{constructor(t){this.data=t}getId(){return this.data.id}getName(){return this.data.name}getPrice(){return this.data.price}getQuantity(){return this.data.quantity}}class B{constructor(t){this.data=t,this.products=[],this.data.products.forEach(o=>{this.products.push(new Q(o))})}getId(){return this.data.id}getStatus(){return this.data.status}getTotalValue(){return this.data.total}getCurrency(){return this.data.currency}getProducts(){return this.products}}const J={id:"yudwuujwd",first_name:"Bob",last_name:"Doe",email:"bob.doe@noaddress.com",date_created:"December 25, 2024 13:03:00Z",date_last_accessed:"April 26, 2025 09:00:00Z"},K={id:"ijdkwplasd",first_name:"John",last_name:"Doe",email:"john.doe@noaddress.com",date_created:"December 17, 2024 03:24:00Z",date_last_accessed:"April 26, 2025 07:00:00Z"},R={id:"trpykados",name:"IPhone 16 Pro",price:1200,quantity:1},z={id:"uiuieroas",name:"HeadPhones Apple Smart",price:110,quantity:1},G={id:"iuijwfwe",name:"Smart Insurance",price:50,quantity:1},W={id:"odasdqwrq",status:"shipping",total:1360,currency:"EUR",products:[R,z,G]};class X{constructor(){this.currentUser=null}async authenticate(t,o){const i=t==="bob"?J:t==="john"?K:null;return this.currentUser=i?new M(i):null,this.currentUser}getCurrentUser(){return this.currentUser}async logout(){this.currentUser=null}async getOrders(){if(this.currentUser===null)throw new Error("The user is not authenticated for this operation");return[new B(W)]}}class Y{constructor(){this.ui=null,this.api=new X,this.onLogin=async(t,o)=>{await this.api.authenticate(t,o)?this.getUI().showAccount():this.getUI().showLogin()},this.onLogout=async()=>{await this.api.logout(),this.getUI().showLogin()}}connectUI(t){this.ui=t,this.ui.showLogin()}getUIProps(){const{api:t,onLogin:o,onLogout:i}=this;return{api:t,onLogin:o,onLogout:i}}getUI(){if(this.ui===null)throw new Error("UI is not connected");return this.ui}}function tt(r){return r.getFirstName()+" "+r.getLastName()}function N(r){return r.toLocaleDateString()}function E(r,t){return r.toLocaleString(void 0,{style:"currency",currency:t,maximumFractionDigits:2})}var et=b("<div><h1>Login</h1><input type=text name=email placeholder=Email><input type=password name=password placeholder=Password><button>Login");function rt(r){const[t,o]=C(""),[i,n]=C(""),e=()=>{r.onLogin(t().trim(),i().trim())};return(()=>{var l=f(et),u=l.firstChild,c=u.nextSibling,s=c.nextSibling,_=s.nextSibling;return c.$$input=d=>o(d.currentTarget.value),s.$$input=d=>n(d.currentTarget.value),_.$$click=e,A(()=>O(c,"value",t())),A(()=>O(s,"value",i())),q(),l})()}V(["input","click"]);var nt=b("<div><a href=#>Logout</a><a href=#>Account</a><a href=#>Orders");function it(r){return(()=>{var t=f(nt),o=t.firstChild,i=o.nextSibling,n=i.nextSibling;return o.$$click=e=>{e.preventDefault(),r.onLogout()},i.$$click=e=>{e.preventDefault(),r.onAccount()},n.$$click=e=>{e.preventDefault(),r.onOrders()},q(),t})()}V(["click"]);var st=b("<div><h1>Account Information</h1><p><strong>Name:</strong> <!$><!/></p><p><strong>Email:</strong> <!$><!/></p><p><strong>Account created:</strong> <!$><!/></p><p><strong>Last accessed:</strong> <!$><!/>");function ot(r){return(()=>{var t=f(st),o=t.firstChild,i=o.nextSibling,n=i.firstChild,e=n.nextSibling,l=e.nextSibling,[u,c]=$(l.nextSibling),s=i.nextSibling,_=s.firstChild,d=_.nextSibling,w=d.nextSibling,[y,g]=$(w.nextSibling),h=s.nextSibling,S=h.firstChild,p=S.nextSibling,x=p.nextSibling,[U,I]=$(x.nextSibling),P=h.nextSibling,m=P.firstChild,T=m.nextSibling,j=T.nextSibling,[k,Z]=$(j.nextSibling);return a(i,()=>tt(r.user),u,c),a(s,()=>r.user.getEmail(),y,g),a(h,()=>N(r.user.getCreatedDate()),U,I),a(P,()=>N(r.user.getLastAccessedDate()),k,Z),t})()}var at=b("<div><table border=1><thead><tr><th>Order ID</th><th>Status</th><th>Total Value</th><th>Products</th></tr></thead><tbody>"),lt=b("<tr><td></td><td></td><td></td><td><table border=1><thead><tr><th>Product Name</th><th>Quantity</th><th>Price</th></tr></thead><tbody>"),ct=b("<tr><td></td><td></td><td>");function ut(r){return(()=>{var t=f(at),o=t.firstChild,i=o.firstChild,n=i.nextSibling;return a(n,()=>r.orders.map(e=>(()=>{var l=f(lt),u=l.firstChild,c=u.nextSibling,s=c.nextSibling,_=s.nextSibling,d=_.firstChild,w=d.firstChild,y=w.nextSibling;return a(u,()=>e.getId()),a(c,()=>e.getStatus()),a(s,()=>E(e.getTotalValue(),e.getCurrency())),a(y,()=>e.getProducts().map(g=>(()=>{var h=f(ct),S=h.firstChild,p=S.nextSibling,x=p.nextSibling;return a(S,()=>g.getName()),a(p,()=>g.getQuantity()),a(x,()=>E(g.getPrice(),e.getCurrency())),h})())),l})())),t})()}var dt=b("<div><!$><!/><!$><!/><!$><!/><!$><!/>");const F=new Y,v=F.getUIProps();function gt(){const[r,t]=C("login"),[o,i]=C(null),[n,e]=C([]);F.connectUI({showAccount:l,showLogin:u,showOrders:c});async function l(){const s=v.api.getCurrentUser();s?(i(s),t("account")):await u()}async function u(){t("login")}async function c(){if(!v.api.getCurrentUser())return await u();const s=await v.api.getOrders();e(s),t("orders")}return(()=>{var s=f(dt),_=s.firstChild,[d,w]=$(_.nextSibling),y=d.nextSibling,[g,h]=$(y.nextSibling),S=g.nextSibling,[p,x]=$(S.nextSibling),U=p.nextSibling,[I,P]=$(U.nextSibling);return a(s,L(it,{get onLogout(){return v.onLogout},onAccount:l,onOrders:c}),d,w),a(s,(()=>{var m=D(()=>r()==="login");return()=>m()&&L(rt,{get onLogin(){return v.onLogin}})})(),g,h),a(s,(()=>{var m=D(()=>!!(r()==="account"&&o()));return()=>m()&&L(ot,{get user(){return o()}})})(),p,x),a(s,(()=>{var m=D(()=>r()==="orders");return()=>m()&&L(ut,{get orders(){return n()}})})(),I,P),s})()}H(()=>L(gt,{}),document.body);
