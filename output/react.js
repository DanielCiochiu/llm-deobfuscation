import{jsxs as i,jsx as e}from"solid-js/jsx-runtime";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();class g{constructor(t){this.data=t}getId(){return this.data.id}getFirstName(){return this.data.first_name}getLastName(){return this.data.last_name}getEmail(){return this.data.email}getCreatedDate(){return new Date(this.data.date_created)}getLastAccessedDate(){return new Date(this.data.date_last_accessed)}}class m{constructor(t){this.data=t}getId(){return this.data.id}getName(){return this.data.name}getPrice(){return this.data.price}getQuantity(){return this.data.quantity}}class w{constructor(t){this.data=t,this.products=[],this.data.products.forEach(n=>{this.products.push(new m(n))})}getId(){return this.data.id}getStatus(){return this.data.status}getTotalValue(){return this.data.total}getCurrency(){return this.data.currency}getProducts(){return this.products}}const f={id:"yudwuujwd",first_name:"Bob",last_name:"Doe",email:"bob.doe@noaddress.com",date_created:"December 25, 2024 13:03:00Z",date_last_accessed:"April 26, 2025 09:00:00Z"},y={id:"ijdkwplasd",first_name:"John",last_name:"Doe",email:"john.doe@noaddress.com",date_created:"December 17, 2024 03:24:00Z",date_last_accessed:"April 26, 2025 07:00:00Z"},L={id:"trpykados",name:"IPhone 16 Pro",price:1200,quantity:1},I={id:"uiuieroas",name:"HeadPhones Apple Smart",price:110,quantity:1},P={id:"iuijwfwe",name:"Smart Insurance",price:50,quantity:1},U={id:"odasdqwrq",status:"shipping",total:1360,currency:"EUR",products:[L,I,P]};class b{constructor(){this.currentUser=null}async authenticate(t,n){const o=t==="bob"?f:t==="john"?y:null;return this.currentUser=o?new g(o):null,this.currentUser}getCurrentUser(){return this.currentUser}async logout(){this.currentUser=null}async getOrders(){if(this.currentUser===null)throw new Error("The user is not authenticated for this operation");return[new w(U)]}}class D{constructor(){this.ui=null,this.api=new b,this.onLogin=async(t,n)=>{await this.api.authenticate(t,n)?this.getUI().showAccount():this.getUI().showLogin()},this.onLogout=async()=>{await this.api.logout(),this.getUI().showLogin()}}connectUI(t){this.ui=t,this.ui.showLogin()}getUIProps(){const{api:t,onLogin:n,onLogout:o}=this;return{api:t,onLogin:n,onLogout:o}}getUI(){if(this.ui===null)throw new Error("UI is not connected");return this.ui}}function O(r){return r.getFirstName()+" "+r.getLastName()}function h(r){return r.toLocaleDateString()}function l(r,t){return r.toLocaleString(void 0,{style:"currency",currency:t,maximumFractionDigits:2})}const C=window.React;class v extends C.Component{constructor(){super(...arguments),this.emailInput=null,this.passwordInput=null,this.handleLogin=()=>{var o,s;const t=(((o=this.emailInput)==null?void 0:o.value)||"").trim(),n=(((s=this.passwordInput)==null?void 0:s.value)||"").trim();this.props.onLogin(t,n)}}render(){return i("div",{children:[e("h1",{children:"Login"}),e("input",{type:"text",name:"email",placeholder:"Email",ref:t=>{this.emailInput=t}}),e("input",{type:"password",name:"password",placeholder:"Password",ref:t=>{this.passwordInput=t}}),e("button",{onClick:this.handleLogin,children:"Login"})]})}}const A=window.React;class N extends A.Component{render(){const{onLogout:t,onAccount:n,onOrders:o}=this.props;return i("div",{children:[e("a",{className:"link",href:"#","data-name":"logout",onClick:t,children:"Logout"}),e("a",{className:"link",href:"#","data-name":"account",onClick:n,children:"Account"}),e("a",{className:"link",href:"#","data-name":"orders",onClick:o,children:"Orders"})]})}}const _=window.React;class R extends _.Component{constructor(t){super(t)}render(){const{user:t}=this.props;return i("div",{children:[e("h1",{children:"Account Information"}),i("p",{children:[e("strong",{children:"Name:"})," ",O(t)]}),i("p",{children:[e("strong",{children:"Email:"})," ",t.getEmail()]}),i("p",{children:[e("strong",{children:"Account created:"})," ",h(t.getCreatedDate())]}),i("p",{children:[e("strong",{children:"Last accessed:"})," ",h(t.getLastAccessedDate())]})]})}}const S=({orders:r})=>e("div",{children:i("table",{border:1,children:[e("thead",{children:i("tr",{children:[e("th",{children:"Order ID"}),e("th",{children:"Status"}),e("th",{children:"Total Value"}),e("th",{children:"Products"})]})}),e("tbody",{children:r.map(t=>i("tr",{children:[e("td",{children:t.getId()}),e("td",{children:t.getStatus()}),e("td",{children:l(t.getTotalValue(),t.getCurrency())}),e("td",{children:i("table",{border:1,children:[e("thead",{children:i("tr",{children:[e("th",{children:"Product Name"}),e("th",{children:"Quantity"}),e("th",{children:"Price"})]})}),e("tbody",{children:t.getProducts().map(n=>i("tr",{children:[e("td",{children:n.getName()}),e("td",{children:n.getQuantity()}),e("td",{children:l(n.getPrice(),t.getCurrency())})]},n.getId()))})]})})]},t.getId()))})]})}),V=window.React,u=class u extends V.Component{constructor(t){super(t),this.state={activeView:null},this.menuView=this.createMenu()}async showAccount(){const t=this.props.api.getCurrentUser();if(t===null)return await this.showLogin();this.setState({activeView:e(R,{user:t})})}async showLogin(){this.setState({activeView:e(v,{onLogin:this.props.onLogin})})}async showOrders(){if(this.props.api.getCurrentUser()===null)return await this.showLogin();const n=await this.props.api.getOrders();this.setState({activeView:e(S,{orders:n})})}createMenu(){return e(N,{onLogout:()=>this.showLogin(),onAccount:()=>this.showAccount(),onOrders:()=>this.showOrders()})}render(){var t;return i("div",{children:[this.menuView,((t=this.state)==null?void 0:t.activeView)||null]})}};u.element="app-view";let d=u;const E=window.ReactDOM.createRoot,p=new D,x=p.getUIProps(),j=E(document.body);j.render(e(d,{...x,ref:r=>{r&&p.connectUI(r)}}));
